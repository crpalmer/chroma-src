/**
 * @module RaftParser
 */ /** */

import RaftEngine from "../engines/base";
import RaftInstruction from "../instructions/base";
import InvalidArgumentError from "../errors/invalid-argument";

abstract class RaftParser {

    /**
     * FINAL
     */
    protected engine: RaftEngine;

    protected constructor (engine: RaftEngine) {
        if (!(engine instanceof RaftEngine)) {
            throw new InvalidArgumentError("Invalid RaftEngine instance provided");
        }
        this.engine = engine;
    }

    public abstract clone(): RaftParser;

    /**
     * FINAL
     */
    public getEngine(): RaftEngine {
        return this.engine;
    }

    public abstract parse(input: string|Buffer): RaftInstruction[]

    public abstract toOutput(instructions: RaftInstruction[]): string|Buffer

    public abstract readFile(inpath: string): string|Buffer

    public abstract writeFile(outpath: string, contents: string|Buffer): void;

    public toString(): string {
        return "RaftParser";
    }

}
export default RaftParser;
