/**
 * @module RaftInstruction
 */ /** */

import InvalidArgumentError from "../errors/invalid-argument";
import RaftInstruction, {RaftInstructionParams} from "./base";
import {validateNumber} from "../common/validation";

export interface DisplayMessageInstructionParams extends RaftInstructionParams {
    message: string,
    duration?: number
}

/**
 * Wait for current moves to finish
 * <p>Finish any moves left in the buffer, thus clearing it.</p>
 */
export default class DisplayMessageInstruction extends RaftInstruction {

    readonly message: string;
    readonly duration: number;

    constructor (params: DisplayMessageInstructionParams) {
        if (params.message === undefined) {
            throw new InvalidArgumentError("Invalid message value '" + params.message + "' supplied as argument");
        }
        if (params.duration !== undefined && (!validateNumber(params.duration) || params.duration < 0)) {
            throw new InvalidArgumentError("Invalid duration '" + params.duration + "' supplied as argument");
        }
        super(params);
        this.message = params.message.toString();
        this.duration = (params.duration === undefined ? null : params.duration);
    }

    toString(): string {
        return "DisplayMessageInstruction";
    }

}
